<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ page.title }} - {{ site.title }}</title>
    <meta name="description" content="{{ site.description }}">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/assets/style/main.css">
    <link rel="preload" href="/assets/fonts/SourceSansPro-Regular-Core.ttf.woff" as="font" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/SourceSansPro-Semibold-Core.ttf.woff" as="font" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/SourceSerifPro-Regular-Core.ttf.woff" as="font" crossorigin="anonymous">
    <link rel="preload" href="/assets/fonts/SourceSerifPro-Semibold-Core.ttf.woff" as="font" crossorigin="anonymous">

    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="apple-mobile-web-app-title" content="T7 Lee School">
    <meta name="application-name" content="T7 Lee School">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#111111">
  </head>
  <body>
    <nav>
      <div class="toc-scroll">
        <div class="toc">
          {% for cat in site.data.toc %}
          <div class="toc-cat {{ cat[0] }}">
            <div class="toc-heading">{{ cat[0] | capitalize }}</div>
            {% for path in cat[1] %}
              {% assign entry = site.pages | where: 'id', path | first %}
              <a
                class="toc-item {% if entry.title == page.title %}current{% endif %}"
                href="{{ entry.url }}">
                {{ entry.title }}
              </a>
            {% endfor %}
          </div>
          {% endfor %}
        </div>
      </div>
    </nav>
    <main>
      <div class="menu-bar">
        <span class="menu-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" fill="currentColor"/>
          </svg>
        </span>
        <span class="menu-title">{{ page.title }}</span>
      </div>
      <h1 class="full-heading">{{ page.title }}</h1>
{{ content }}
      <hr>
      <p class="help">
        Something missing?<br>
        <a href="https://github.com/t7leeschool/t7leeschool.github.io/blob/master/{{ page.path }}">
          Edit this page
        </a>
      </p>
    </main>
    <script>
      var closeMenu = function closeMenu (e) {
        document.body.classList.remove('expanded');
        document.querySelector('main').removeEventListener('click', closeMenu);
      }

      document.querySelector('.menu-btn').addEventListener('click', function (e) {
        e.stopPropagation();
        document.body.classList.add('expanded');
        document.querySelector('main').addEventListener('click', closeMenu);
      });
    </script>
    <script>
      document.querySelectorAll('audio').forEach((el) => {
        if (!el.loop) return;
        var t0;

        el.addEventListener(
          'seeked',
          function testLoop (e) {
            var t = performance.now();

            if (typeof el.duration !== 'undefined' && typeof t0 !== 'undefined') {
              var diff = Math.abs(t - t0 - el.duration * 1000);
              if (diff < 200) {
                // Loop found, stop testing
                el.removeEventListener('seeked', testLoop);

                if (diff > 80) {
                  // Choppy loop, display warning
                  var warning = document.createElement('p');
                  warning.className = 'flash loop-warning';
                  warning.innerHTML =
                    'There’s a bug in Chrome that '
                    + '<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=353072">'
                    + 'audio loops aren’t seamless.</a> '
                    + 'Use Firefox or Edge for practise.';
                  el.insertAdjacentElement('afterend', warning);
                }
              }
            }

            t0 = t;
          },
        );
      });
    </script>
  </body>
</html>
